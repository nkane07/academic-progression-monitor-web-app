<!DOCTYPE html>
<html>
<head>
  <title>Add New Module</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <%- include("partials/banner", { req }) %>

  <main class="page-container">
    <h1>Add New Module</h1>

    <% if (req.query.added) { %>
      <div id="successBanner" class="alert success">
        ✅ Module added successfully!
      </div>
    <% } %>

    <% if (req.query.duplicate) { %>
      <div class="alert error">A module with this code already exists.</div>
    <% } %>

    <form action="/admin/modules/new" method="post" class="form-section">
      <div class="form-group">
        <label for="module_name">Module Name:</label>
        <input type="text" name="module_name" id="module_name" required>
      </div>

      <div class="form-group">
        <label for="module_code">Module Code:</label>
        <input type="text" name="module_code" id="module_code" required>
      </div>

      <div class="form-group">
        <label for="credit_value">Credit Value:</label>
        <input type="number" name="credit_value" id="credit_value" required>
      </div>

      <div class="form-group">
        <label for="degree_programme_code">Pathway Code (e.g. IFSY, BSAS):</label>
        <input type="text" name="degree_programme_code" id="degree_programme_code" required>
      </div>

      <div class="form-group">
        <label for="semester">Semester:</label>
        <select name="semester" id="semester" required>
          <option value="">-- Select Semester --</option>
          <option value="AUT">Autumn</option>
          <option value="SPR">Spring</option>
          <option value="FYR">Full Year</option>
        </select>
      </div>

      <div class="form-group">
        <button type="submit" class="button">Add Module</button>
      </div>
    </form>
  </main>

  <footer>
    <p>University Portal © <%= currentYear %></p>
  </footer>

  <script>
    setTimeout(() => {
      const banner = document.getElementById('successBanner');
      if (banner) {
        banner.style.transition = 'opacity 0.5s ease';
        banner.style.opacity = '0';
        setTimeout(() => banner.remove(), 500);
      }
    }, 4000);
  </script>
</body>
</html>
