<!DOCTYPE html>
<html>
<head>
  <title>Student Inbox</title>
  <link rel="stylesheet" href="https://cdn.simplecss.org/simple.min.css">
  <link rel="stylesheet" href="/styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
</head>
<body>
  <header>
    <h3><i class="fas fa-envelope"></i> Student Inbox</h3>
    <nav>
      <a href="/student/profile" class="button">Profile</a>
      <a href="/student" class="button">Dashboard</a>
      <a href="/logout" class="button">Logout</a>
    </nav>
  </header>

  <main>
    <h2><i class="fas fa-inbox"></i> Messages</h2>

    <% if (messages.length === 0) { %>
      <p><i class="fas fa-info-circle"></i> You have no messages.</p>
    <% } else { %>
      <table>
        <thead>
          <tr>
            <th>Status</th>
            <th>Subject</th>
            <th>Sender</th>
            <th>Sent At</th>
          </tr>
        </thead>
        <tbody>
          <% messages.forEach(msg => { %>
            <tr>
              <td>
                <% if (!msg.is_read) { %>
                  <span class="badge badge-warning"><i class="fas fa-circle"></i> Unread</span>
                <% } else { %>
                  <span class="badge badge-success"><i class="fas fa-check-circle"></i> Read</span>
                <% } %>
              </td>
              <td><%= msg.subject %></td>
              <td><%= msg.sender_name %></td>
              <td><%= new Date(msg.sent_at).toLocaleString() %></td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    <% } %>
  </main>

  <footer>
    <p>University Portal Â© <%= currentYear %></p>
  </footer>
</body>
</html>
